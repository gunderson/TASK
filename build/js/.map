{"version":3,"file":null,"sources":["../src/js/Base.js","../src/js/views/View.js","../src/js/views/three-view/Three-View.js","../src/js/views/pages/Page.js","../src/js/views/pages/Threejs-Page.js","../src/js/models/Model.js","../src/js/models/SocketModel.js","../src/js/collections/Collection.js","../src/js/data/Constants.js","../src/js/utils/Validator.js","../src/js/lib/prefixmethod.js","../src/js/services/Social.js","../src/js/services/Analytics.js","../src/js/services/Data-Source.js","../src/js/services/Data-Sources/Microphone-Data-Source.js","../src/js/services/Data-Sources/Audio-Player-Data-Source.js","../src/js/index.js"],"sourcesContent":["const _ = require( 'lodash' );\nconst $ = require( 'jquery' );\nconst Events = require( 'backbone-events-standalone' );\n\nclass Base {\n\tconstructor( options ) {\n\t\tthis.options = Base.merge( {\n\t\t\t// ---------------------------------------------------\n\t\t\t// Event Listeners\n\n\t\t\tevents: [],\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Function Scope Binding\n\n\t\t\tbindFunctions: [\n\t\t\t\t'getLocalObject',\n\t\t\t\t'makeBoundFunctions',\n\t\t\t\t'delegateEvents',\n\t\t\t\t'undelegateEvents'\n\t\t\t]\n\t\t}, options );\n\t\t_.extend( this, this.options );\n\t\tthis.makeBoundFunctions( this.options.bindFunctions, this );\n\t}\n\n\t// ---------------------------------------------------\n\t// Bind functions named in the 'bindFunctions' hash\n\tmakeBoundFunctions( funcNames, context ) {\n\t\tcontext = context || this;\n\t\t_.each( funcNames, ( funcName ) => {\n\t\t\tif ( !context[ funcName ] ) {\n\t\t\t\tconsole.error( `You tried to bind \"${funcName}\", but it doesn't exist on `, context );\n\t\t\t}\n\t\t\tcontext[ funcName ] = context[ funcName ].bind( context );\n\t\t} );\n\t\treturn context;\n\t}\n\n\t// ---------------------------------------------------\n\n\tdelegateEvents() {\n\t\t_( this.options.events )\n\t\t\t.each( ( e ) => {\n\n\t\t\t\tlet handler = this.getLocalObject( e.handler );\n\t\t\t\tlet target = this.getLocalObject( e.target );\n\n\t\t\t\t// use jquery for ui events\n\t\t\t\tif ( target instanceof $ ) {\n\t\t\t\t\ttarget.on( e.eventName, handler );\n\t\t\t\t} else {\n\t\t\t\t\t// use backbone for all other events\n\t\t\t\t\tthis.listenTo( target, e.eventName, handler );\n\t\t\t\t}\n\t\t\t} );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tundelegateEvents() {\n\t\t_( this.options.events )\n\t\t\t.each( ( e ) => {\n\t\t\t\t// check to see if event has been delegated\n\t\t\t\tif ( typeof e.target === 'string' ) return;\n\t\t\t\tlet target = this.getLocalObject( e.target );\n\t\t\t\tif ( target instanceof $ ) {\n\t\t\t\t\ttarget.off( e.eventName );\n\t\t\t\t} else {\n\t\t\t\t\tthis.stopListening( target, e.eventName );\n\t\t\t\t}\n\t\t\t} );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tgetLocalObject( name ) {\n\t\tif ( name === 'this' ) {\n\t\t\treturn this;\n\t\t} else if ( typeof name === 'string' ) {\n\t\t\t// try to resolve the name as an object on this\n\t\t\tvar target = this[ name ];\n\t\t\t// var target = _.get( this, name );\n\n\t\t\t// if there is no object on this with that name, try to find it as selector in the a local jquery object\n\t\t\tif ( !target && this.$ ) target = this.$( name );\n\n\t\t\t// consider it a global selector and use jquery to find it\n\t\t\tif ( ( !target || target instanceof $ ) && target.length === 0 && this.$ ) {\n\t\t\t\ttarget = $( name );\n\t\t\t}\n\n\t\t\t// Shaka. When the walls fell\n\t\t\tif ( !target || target instanceof $ && target.length === 0 ) {\n\t\t\t\tconsole.warn( `Peak was unable to delegate event to ${name} on ${this.name}` );\n\t\t\t}\n\n\t\t\treturn target;\n\t\t} else if ( typeof name === 'object' ) {\n\t\t\tif ( typeof name.on === 'function' ) {\n\t\t\t\ttarget = name;\n\t\t\t} else {\n\t\t\t\t// last ditch effort to catch window/document events;\n\t\t\t\ttarget = $( name );\n\t\t\t}\n\t\t\treturn target;\n\t\t}\n\n\t\treturn name;\n\t}\n\n\t// ---------------------------------------------------\n\n\tstatic merge( ...opts ) {\n\t\topts.push( Base.mergeRules );\n\t\tlet m = _.mergeWith.apply( this, opts );\n\t\treturn m;\n\t}\n\n\t// ---------------------------------------------------\n\n\tstatic mergeRules( objValue, srcValue ) {\n\t\tif ( _.isArray( objValue ) ) {\n\t\t\treturn objValue.concat( srcValue );\n\t\t} else if ( typeof srcValue === 'string' || typeof srcValue === 'function' ) {\n\t\t\treturn srcValue;\n\t\t} else if ( objValue && typeof objValue === 'object' && typeof srcValue === 'object' ) {\n\t\t\treturn _.extend( {}, objValue, srcValue );\n\t\t}\n\t\treturn srcValue;\n\t}\n}\nBase.prototype.templates = [];\nEvents.mixin( Base.prototype );\n","var _ = require( 'lodash' );\nvar $ = require( 'jquery' );\nvar Base = require( '../Base' );\n\n\nclass View extends Base {\n\tconstructor( options ) {\n\t\tsuper( Base.merge( {\n\t\t\t// ---------------------------------------------------\n\t\t\t// Local Properties\n\n\t\t\tel: undefined,\n\t\t\tmodel: undefined,\n\t\t\ttemplate: '',\n\t\t\tid: '',\n\t\t\ttagname: 'div',\n\t\t\tclassname: '',\n\t\t\tkeep: false,\n\t\t\tinsert: true,\n\t\t\tdomUpdates: [],\n\t\t\t// hasRendered: false,\n\t\t\tloadPromise: undefined,\n\t\t\tparentView: undefined,\n\t\t\thasRendered: false,\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Child Views\n\n\t\t\tviews: {\n\t\t\t\t/*\n\t\t\t\t\t'childView0': new ChildView0({\n\t\t\t\t\t\tel: '#child-id-0',\n\t\t\t\t\t\tmodel: this.model.widgets.at(0)\n\t\t\t\t\t}),\n\t\t\t\t\t'childView1': new ChildView1({\n\t\t\t\t\t\tel: '#child-id-1',\n\t\t\t\t\t\tmodel: this.model.widgets.at(1)\n\t\t\t\t\t}), ...\n\t\t\t\t*/\n\t\t\t},\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Event Listeners\n\n\t\t\tevents: [\n\t\t\t\t{\n\t\t\t\t\ttarget: 'APP',\n\t\t\t\t\teventName: 'resize',\n\t\t\t\t\thandler: 'onResize'\n\t\t\t\t}\n\t\t\t],\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Data Binding\n\n\t\t\tdataBindings: [\n\t\t\t\t/*\n\t\t\t\t{\n\t\t\t\t\telement: '.selector',\n\t\t\t\t\tattributeName: 'attr',\n\t\t\t\t\tmodel: 'model',\n\t\t\t\t\telementChangeEventName: 'change',\n\t\t\t\t\tmode: 'get' || 'send'\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t],\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Function Scope Binding\n\n\t\t\tbindFunctions: [\n\t\t\t\t'bindData',\n\t\t\t\t'unbindData',\n\t\t\t\t'delegateEvents',\n\t\t\t\t'createDataBinding',\n\t\t\t\t'destroy',\n\t\t\t\t'undelegateEvents',\n\t\t\t\t'updateDOM',\n\t\t\t\t'render',\n\t\t\t\t'setupElement',\n\t\t\t\t'onResize',\n\t\t\t\t'beforeRender',\n\t\t\t\t'afterRender'\n\t\t\t]\n\t\t}, options ) );\n\n\t\t// ---------------------------------------------------\n\t\t// Finish setup\n\n\t\tthis.parseName( this.options );\n\t\tthis.dates = [];\n\t}\n\n\t// ---------------------------------------------------\n\n\tstatic getTemplate( name ) {\n\t\t// TEMPLATES is a global object on window\n\t\treturn name ? Base.prototype.TEMPLATES[ name ] : () => '';\n\t}\n\n\t// ---------------------------------------------------\n\n\tparseName( options ) {\n\t\tif ( options.name ) {\n\t\t\tif ( !options.el ) this.el = options.el = '.' + options.name;\n\t\t}\n\t\treturn options;\n\t}\n\n\t// ---------------------------------------------------\n\n\tgetView( name ) {\n\t\treturn _.find( this.views, {\n\t\t\tname: name\n\t\t} );\n\t}\n\n\t// ---------------------------------------------------\n\n\tonResize() {\n\t\t// override me\n\t}\n\n\t// ---------------------------------------------------\n\n\tbeforeRender() {\n\t\t// override me\n\n\t}\n\n\t// ---------------------------------------------------\n\n\tafterRender() {\n\t\t// override me\n\t}\n\n\t// ---------------------------------------------------\n\n\tsetupElement() {\n\t\t// use a template if defined\n\t\t// only render it if it hasn't been rendered before && it's not marked for keeping\n\t\tif ( !this.hasRendered || !this.keep ) {\n\n\n\t\t\tif ( this.el ) {\n\t\t\t\t// try to find it locally\n\t\t\t\tthis.el = this.parentView.$( this.el ).first()[ 0 ] ||\n\t\t\t\t// try to find it globally\n\t\t\t\t$( this.el ).first()[ 0 ] ||\n\t\t\t\t// create one\n\t\t\t\t$( `<${this.tagname} class='${this.classname}' id='${this.id}' />` ).first()[ 0 ];\n\t\t\t\tthis.$el = $( this.el );\n\t\t\t}\n\n\t\t\tif ( this.template ) {\n\t\t\t\tlet $prev, $next;\n\t\t\t\tif ( this.$el && this.$el.parent() ) {\n\t\t\t\t\t$prev = this.$el.prev();\n\t\t\t\t\t$next = this.$el.next();\n\t\t\t\t\tthis.$el.remove();\n\t\t\t\t\tthis.insert = true;\n\t\t\t\t}\n\n\t\t\t\tvar templateFn = View.getTemplate( this.template );\n\t\t\t\tif ( !templateFn ) {\n\t\t\t\t\tconsole.warn( `PEAK: Could not find template named ${this.template}.` );\n\t\t\t\t}\n\t\t\t\tvar html = templateFn( this.serialize() );\n\t\t\t\tthis.$el = $( html );\n\t\t\t\t// if it was already in the view, attempt to put the new element where the old one was\n\t\t\t\tif ( this.insert ) {\n\t\t\t\t\tif ( $prev && $prev.length ) {\n\t\t\t\t\t\t$prev.after( this.$el );\n\t\t\t\t\t} else if ( $prev && $next.length ) {\n\t\t\t\t\t\t$next.before( this.$el );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.parentView.$el.append( this.$el );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// save the primary element\n\t\t\tthis.el = this.$el[ 0 ];\n\t\t\t// setup helper find function\n\t\t\tthis.$ = this.$el.find.bind( this.$el );\n\t\t}\n\t\treturn this.$el;\n\t}\n\n\t// ---------------------------------------------------\n\n\trender( parentView ) {\n\t\tthis.parentView = parentView instanceof View ? parentView : this.parentView || window;\n\t\tthis.undelegateEvents();\n\t\tthis.unbindData();\n\t\tthis.setupElement();\n\t\tthis.beforeRender();\n\t\tthis.trigger( 'beforeRender', this );\n\n\t\t// render child views\n\t\t_.each( this.views, ( v ) => v.render( this ) );\n\n\t\tthis.delegateEvents();\n\t\tthis.bindData();\n\t\tthis.afterRender();\n\t\tthis.trigger( 'afterRender', this );\n\t\tthis.onResize();\n\t\tthis.hasRendered = true;\n\t}\n\n\t// ---------------------------------------------------\n\t// bind the value of an HTMLElement to a model or collection\n\n\tcreateDataBinding( hash ) {\n\t\tlet attributeName = hash.attributeName;\n\t\tlet element = hash.element;\n\t\tlet model = hash.model;\n\t\tlet elementChangeEventName = hash.elementChangeEventName || 'change';\n\t\tlet mode = hash.mode;\n\t\t// TODO document get/setElementData\n\t\tlet setElementData = hash.setElementData;\n\t\tlet getElementData = hash.getElementData;\n\n\t\t// parse argument options\n\t\tlet $element = this.getLocalObject( element );\n\t\tmodel = typeof model === 'string' ? this[ model ] : this.model || model;\n\n\t\t// hack to handle radio button groups\n\t\tlet isRadio = $element.attr( 'type' ) === 'radio';\n\t\t// handle <input>s differently than regular elements\n\t\tlet updateMethod = $element.is( 'input' ) ? 'val' : 'text';\n\n\t\t// set listeners\n\t\tif ( mode !== 'send' ) this.listenTo( model, `change:${attributeName}`, updateElement ) && updateElement.call( this, { value: model[ attributeName ], model: model } );\n\t\tif ( mode !== 'get' ) $element.on( elementChangeEventName, updateModel );\n\n\t\t// assign a destroy function for convenient destruction\n\t\thash.unbindData = unbindData.bind( hash );\n\n\t\treturn hash;\n\n\t\tfunction updateElement( event ) {\n\t\t\tvar val = event.value;\n\t\t\tlet fn = setElementData ? () => this.getLocalObject( setElementData )( val, $element ) : () => $element[ updateMethod ]( [ val ], $element );\n\t\t\tthis.domUpdates.push( fn );\n\t\t\tif ( !this.domUpdateRequest ) {\n\t\t\t\tthis.domUpdateRequest = requestAnimationFrame( this.updateDOM );\n\t\t\t}\n\t\t}\n\n\t\tfunction updateModel( event ) {\n\t\t\tlet $activeEl = !isRadio ? $element : $element.filter( ':checked' );\n\t\t\tmodel[ attributeName ] = ( getElementData && getElementData( $activeEl ) ) || $activeEl.val();\n\t\t}\n\n\t\tfunction unbindData() {\n\t\t\tthis.stopListening( model, `change:${attributeName}`, updateElement );\n\t\t\t$element.off( elementChangeEventName, updateModel );\n\t\t\tdelete this.unbindData;\n\t\t}\n\t}\n\n\t// ---------------------------------------------------\n\n\tbindData() {\n\t\t_.each( this.dataBindings, this.createDataBinding );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tunbindData() {\n\t\t_.each( this.dataBindings, ( hash ) => hash.unbindData && hash.unbindData() );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\t// batch DOM updates\n\n\tupdateDOM() {\n\t\tthis.domUpdateRequest = null;\n\t\tthis.domUpdates.forEach( ( fn ) => {\n\t\t\tfn();\n\t\t} );\n\t\tthis.domUpdates = [];\n\t}\n\n\t// ---------------------------------------------------\n\n\tdelegateEvents() {\n\t\t// FIXME: this is a pass-through to translate old code from using selector to use target\n\t\t_( this.options.events )\n\t\t\t.filter( ( e ) => e.selector )\n\t\t\t.each( ( e ) => {\n\t\t\t\te.target = e.selector;\n\t\t\t} );\n\t\tsuper.delegateEvents();\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tundelegateEvents() {\n\t\t_( this.options.events )\n\t\t\t.filter( ( e ) => e.selector )\n\t\t\t.each( ( e ) => {\n\t\t\t\te.target = e.selector;\n\t\t\t} );\n\t\tsuper.undelegateEvents();\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tdestroy() {\n\t\tthis.unbindData();\n\t\tthis.undelegateEvents();\n\t\tthis.stopListening();\n\t\t_.each( this.views, ( v ) => v.destroy() );\n\t}\n\n\t// ---------------------------------------------------\n\n\tserialize() {\n\t\tvar model = this.model ? this.model.attributes : {};\n\t\treturn _.extend( {\n\t\t\t// \"this.ENV\" is a prototype property of all Base objects\n\t\t\tenv: this.ENV\n\t\t}, model );\n\t}\n\n\t// ---------------------------------------------------\n\n\t$( selector ) {\n\t\treturn this.$el ? this.$el.find( selector ) : $( selector );\n\t}\n\n\t// ---------------------------------------------------\n\n\tstatic mergeRules( objValue, srcValue ) {\n\t\tif ( _.isArray( objValue ) ) {\n\t\t\tif ( objValue.length && objValue[ 0 ] instanceof View ) return objValue;\n\t\t\treturn objValue.concat( srcValue );\n\t\t}\n\t}\n}\n\nmodule.exports = View;\n","var _ = require( 'lodash' );\nvar View = require( '../View' );\nvar THREE = require( 'three' );\n\nclass ThreeView extends View {\n\tconstructor( options ) {\n\n\t\tsuper( ThreeView.merge( {\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Class Properties\n\n\t\t\tname: 'three-holder',\n\t\t\tel: '.three-holder',\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Local Properties\n\n\t\t\trendererOptions: undefined,\n\t\t\tscenes: undefined,\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Event Listeners\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Bind Functions\n\n\t\t\tbindFunctions: [\n\t\t\t\t'update',\n\t\t\t\t'draw',\n\t\t\t\t'setup',\n\t\t\t\t'onResize'\n\t\t\t]\n\t\t}, options ) );\n\t}\n\n\t// ---------------------------------------------------\n\t// Setup Threejs\n\t// setup() is called by peak/js/pages/ThreejsPage.js :: setupThreeView()\n\t// which is called by peak/js/pages/ThreejsPage.js :: afterRender()\n\tsetup() {\n\t\t// Renderer\n\t\tthis.renderer = new THREE.WebGLRenderer( {\n\t\t\talpha: true\n\t\t} );\n\t\tthis.renderer.setClearColor( 0x000000, 0 );\n\t\tthis.renderer.setSize( this.el.innerWidth, this.el.innerHeight );\n\t\tthis.$el.append( this.renderer.domElement );\n\n\t\t// Setup Scenes\n\t\tthis.scenes = _.mapValues( this.scenes, ( SceneClass, id ) => {\n\t\t\treturn new SceneClass( {\n\t\t\t\tel: this.el,\n\t\t\t\trenderer: this.renderer\n\t\t\t} );\n\t\t} );\n\n\t\tvar sceneNames = _.keys( this.scenes );\n\n\t\tif ( sceneNames.length ) this.changeScene( sceneNames[ 0 ] );\n\n\t\treturn this;\n\t}\n\n\tchangeScene( name ) {\n\t\t// console.log( 'Three-View changeScene to:', name, this.activeScene ? `from: ${this.activeScene.name}` : '' );\n\t\t// TODO: fade out\n\t\tthis.activeScene = this.scenes[ name ];\n\t\tvar loadPromise = this.activeScene.setup( {\n\t\t\trenderer: this.renderer\n\t\t} );\n\n\t\t// TODO: Show Loader\n\t\tloadPromise.then( () => {\n\t\t\t// TODO: hide Loader\n\t\t\tthis.onResize();\n\t\t} );\n\n\t\t// TODO: fade up\n\t}\n\n\tonResize() {\n\t\tthis.width = this.$el.width();\n\t\tthis.height = this.$el.height();\n\t\tthis.halfWidth = this.width * 0.5;\n\t\tthis.halfHeight = this.height * 0.5;\n\n\t\t_.each( this.scenes, ( s ) => {\n\t\t\ts.width = this.width;\n\t\t\ts.height = this.height;\n\t\t\ts.halfWidth = this.halfWidth;\n\t\t\ts.halfHeight = this.halfHeight;\n\t\t} );\n\t\tif ( this.renderer ) this.renderer.setSize( this.width, this.height );\n\t\tif ( this.activeScene ) this.activeScene.onResize();\n\t};\n\n\tupdate( data ) {\n\t\tdata.time = Date.now();\n\t\tif ( this.activeScene && this.activeScene.isLoaded ) {\n\t\t\tthis.activeScene.update( data );\n\t\t}\n\t\tthis.trigger( 'update', data );\n\t};\n\n\tdraw() {\n\t\tlet data = {\n\t\t\ttime: Date.now()\n\t\t};\n\t\tif ( this.activeScene && this.activeScene.isLoaded ) {\n\t\t\tthis.activeScene.render( data );\n\t\t}\n\t\tthis.trigger( 'draw', data );\n\t};\n\n\tserialize() {\n\t\treturn _.extend(\n\t\t\tsuper.serialize(), {\n\t\t\t\tsceneNames: _.keys( this.scenes )\n\t\t\t}\n\t\t);\n\t}\n\n}\n\nmodule.exports = ThreeView;\n","var _ = require( 'lodash' );\nvar $ = require( 'jquery' );\nvar View = require( '../View' );\nvar TweenLite = require( 'gsap/src/uncompressed/TweenLite' );\nvar CSSPlugin = require( 'gsap/src/uncompressed/plugins/CSSPlugin' );\nvar Easing = require( 'gsap/src/uncompressed/easing/EasePack' );\n\nvar PAGE_TRANSITION_DURATION = 1.5;\n\nclass Page extends View {\n\tconstructor( options ) {\n\t\tsuper( View.merge( {\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Class Properties\n\n\t\t\tname: '',\n\t\t\ttype: 'page',\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Local Properties\n\n\t\t\tcol: 0,\n\t\t\trow: 0,\n\t\t\tpage: null,\n\t\t\tlayerAnimationOffset: 0.25,\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Event Listeners\n\n\t\t\tevents: [ {\n\t\t\t\ttarget: 'this',\n\t\t\t\teventName: 'transitionInComplete',\n\t\t\t\thandler: 'transitionInComplete'\n\t\t\t}, {\n\t\t\t\ttarget: 'this',\n\t\t\t\teventName: 'transitionOutComplete',\n\t\t\t\thandler: 'transitionOutComplete'\n\t\t\t}],\n\t\t\tbindFunctions: [\n\t\t\t\t'fetch',\n\t\t\t\t'onRoute',\n\t\t\t\t'transitionIn',\n\t\t\t\t'transitionOut',\n\t\t\t\t'transitionInComplete',\n\t\t\t\t'transitionOutComplete'\n\t\t\t]\n\t\t}, options ) );\n\t}\n\n\t// ---------------------------------------------------\n\n\tloadAssets() {\n\t\tvar deferred = $.Deferred();\n\t\t// load stuff in here\n\t\t// resolve the deferred when load is complete\n\t\tdeferred.resolve();\n\t\treturn deferred.promise();\n\t}\n\n\t// ---------------------------------------------------\n\n\tparseName( options ) {\n\t\tif ( options.name ) {\n\t\t\tif ( !options.el ) this.el = options.el = '#' + options.name;\n\t\t}\n\t\treturn options;\n\t}\n\n\t// ---------------------------------------------------\n\n\tfetch( params, promise ) {\n\n\t\tpromise = promise || new $.Deferred();\n\n\t\tvar recallFetch = () => {\n\t\t\tthis.fetch( params, promise );\n\t\t\treturn promise;\n\t\t};\n\n\t\tvar fetchModel = () => {\n\t\t\tconsole.log( this.name + ' fetching the model' );\n\t\t\tthis.loadPromise = this.model.fetch()\n\t\t\t\t.done( recallFetch );\n\t\t};\n\n\t\tvar renderView = () => {\n\t\t\tconsole.log( this.name + ' render' );\n\t\t\tthis.render();\n\t\t\trecallFetch();\n\t\t};\n\n\t\tvar loadAssets = () => {\n\t\t\tconsole.log( this.name + ' waiting for load' );\n\t\t\tthis.trigger( 'loadStart', {\n\t\t\t\ttype: this.type,\n\t\t\t\tid: this.route\n\t\t\t} );\n\n\t\t\tthis.loadAssets();\n\t\t\tthis.loadPromise\n\t\t\t\t.then( recallFetch );\n\t\t};\n\n\t\tvar finishRender = () => {\n\t\t\t// console.log( this );\n\t\t\tconsole.log( this.name + ' finished fetching view' );\n\t\t\tif ( this.loadPromise ) {\n\t\t\t\tconsole.log( this.name, 'loadpromise state:', this.loadPromise.state() );\n\t\t\t}\n\t\t\t_.defer( function() {\n\t\t\t\tpromise.resolve();\n\t\t\t} );\n\t\t\tthis.trigger( 'fetchComplete', this );\n\t\t\tthis.trigger( 'loadComplete', {\n\t\t\t\ttype: 'page',\n\t\t\t\tid: this.name\n\t\t\t} );\n\t\t};\n\n\t\t// first load the model if there is one\n\t\t// TODO Reenable loading the model if needed\n\t\tif ( false && this.model && this.model.url ) {\n\t\t\tfetchModel();\n\t\t\t// then render\n\t\t} else if ( !this.hasRendered ) {\n\t\t\trenderView();\n\t\t\t// then wait for the components to load\n\t\t} else if ( this.loadPromise && this.loadPromise.state() === 'pending' ) {\n\t\t\tloadAssets();\n\t\t\t// then you're good to go\n\t\t} else {\n\t\t\tfinishRender();\n\t\t}\n\n\t\treturn promise;\n\n\t}\n\n\tonRoute( route ) {\n\t\tvar prevRoute = route.prevRoute;\n\n\t\tvar currentPage = this.page;\n\t\tvar newPage = null;\n\n\t\t// console.log( this, route, prevRoute );\n\n\t\t// only change pages if new base-route is different from the last\n\t\tif ( route.parts.length > 0 && route.parts[ 0 ] !== prevRoute.parts[ 0 ] ) {\n\n\t\t\t// remove the old page\n\t\t\t$( 'html' )\n\t\t\t\t.removeClass( prevRoute.parts[ 0 ] + '-page' );\n\n\t\t\tif ( route ) {\n\t\t\t\t$( 'html' )\n\t\t\t\t\t.addClass( route.parts[ 0 ] + '-page' );\n\n\t\t\t\t// determine new page\n\t\t\t\tnewPage = _.find( this.views, {\n\t\t\t\t\tname: route.parts[ 0 ]\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// if the route doesn't match any pages, do nothing\n\t\t\tif ( !newPage ) return;\n\n\t\t\tnewPage.fetch( route )\n\t\t\t\t.done( () => {\n\t\t\t\t\tthis.trigger( 'loadEnd' );\n\n\t\t\t\t\tif ( currentPage ) {\n\t\t\t\t\t\tcurrentPage.transitionOut( newPage );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar subRoute = _.cloneDeep( route );\n\t\t\t\t\tsubRoute.parts.slice( 1 );\n\t\t\t\t\tsubRoute.prevRoute.parts.slice( 1 );\n\n\t\t\t\t\tnewPage.transitionIn( currentPage, subRoute );\n\n\t\t\t\t\tif ( subRoute.parts.length > 0 ) {\n\t\t\t\t\t\t// this means it's a sub-route, recurse child pages\n\t\t\t\t\t\tnewPage.onRoute( subRoute );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\tthis.page = newPage;\n\t\t} else if ( route.parts.length === 0 && currentPage ) {\n\t\t\t// currentPage.transitionOut();\n\n\t\t} else if ( route.parts.length > 0 && currentPage ) {\n\t\t\t// it's probably a sub-page\n\t\t\t// tell the current page to display the new info\n\t\t\tcurrentPage.onRoute( route );\n\t\t}\n\t}\n\n\tclearSubPage() {\n\n\t}\n\n\ttransitionIn( prev ) {\n\t\tthis.$( '.cover' )\n\t\t\t.on( 'mousewheel', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t} );\n\n\t\tthis.$el.addClass( 'active' );\n\t\tthis.$el.find( '>.content' )\n\t\t\t.scrollTop( 0 );\n\n\t\tthis.$el.show();\n\t\tthis.onResize();\n\n\t\tif ( !prev ) {\n\t\t\t// console.log('No Previous Page');\n\t\t\tTweenLite.to( this.$( '.cover' ), 0, {\n\t\t\t\tautoAlpha: 0\n\t\t\t} );\n\t\t\tthis.trigger( 'transitionInComplete' );\n\t\t\treturn this;\n\t\t}\n\n\t\t// hide the cover\n\t\tTweenLite.fromTo( this.$( '.cover' ), PAGE_TRANSITION_DURATION, {\n\t\t\tautoAlpha: 1\n\t\t}, {\n\t\t\tautoAlpha: 0,\n\t\t\tease: Easing.Power4.easeOut,\n\t\t\toverwrite: true\n\t\t} );\n\n\t\tvar startX = 0,\n\t\t\tstartY = 0;\n\n\t\tif ( this.col < prev.col ) {\n\t\t\tstartX = '-100';\n\t\t\t// this.app.media.playSound( 'page-forward' );\n\t\t} else if ( this.col > prev.col ) {\n\t\t\tstartX = '100';\n\t\t\t// this.app.media.playSound( 'page-back' );\n\t\t} else if ( this.row < prev.row ) {\n\t\t\tstartY = '100';\n\t\t} else if ( this.row > prev.row ) {\n\t\t\tstartY = '-100';\n\t\t}\n\n\t\t// animate page layer\n\t\tTweenLite.fromTo( this.$el, PAGE_TRANSITION_DURATION, {\n\t\t\tdisplay: 'block',\n\t\t\tx: startX + '%',\n\t\t\ty: startY + '%'\n\t\t}, {\n\t\t\tx: '0%',\n\t\t\ty: '0%',\n\t\t\tease: Easing.Power4.easeOut,\n\t\t\tonComplete: () => {\n\t\t\t\tthis.$el.css( {\n\t\t\t\t\ttransform: ''\n\t\t\t\t} );\n\t\t\t\tthis.trigger( 'transitionInComplete' );\n\t\t\t},\n\t\t\toverwrite: true\n\t\t} );\n\n\t\t// animate content layer\n\t\tconsole.log( 'Page::transitionIn', this.$( '> .content' ) );\n\t\tTweenLite.fromTo( this.$( '> .content' ), PAGE_TRANSITION_DURATION, {\n\t\t\tx: ( startX * this.layerAnimationOffset ) + '%',\n\t\t\ty: ( startY * this.layerAnimationOffset ) + '%'\n\t\t}, {\n\t\t\tx: '0%',\n\t\t\ty: '0%',\n\t\t\tease: Easing.Power4.easeOut,\n\t\t\toverwrite: true\n\t\t} );\n\n\t\treturn [ startX, startY ];\n\t}\n\n\ttransitionOut( next ) {\n\t\tthis.$el.removeClass( 'active' );\n\t\tthis.$( '.cover' )\n\t\t\t.off( 'mousewheel' );\n\t\tTweenLite.fromTo( this.$( '.cover' ), PAGE_TRANSITION_DURATION, {\n\t\t\tautoAlpha: 0\n\t\t}, {\n\t\t\tautoAlpha: 1,\n\t\t\tease: Easing.Power4.easeOut,\n\t\t\toverwrite: true\n\t\t} );\n\n\t\tvar endX = 0,\n\t\t\tendY = 0;\n\n\t\t// transition out to the right by default\n\t\tif ( !next || this.col > next.col ) {\n\t\t\tendX = '100';\n\t\t} else if ( this.col < next.col ) {\n\t\t\tendX = '-100';\n\t\t} else if ( this.row < next.row ) {\n\t\t\tendY = '100';\n\t\t} else if ( this.row > next.row ) {\n\t\t\tendY = '-100';\n\t\t}\n\n\t\t// animate page layer\n\t\tTweenLite.fromTo( this.$el, PAGE_TRANSITION_DURATION, {\n\t\t\t// display: 'block',\n\t\t\tx: '0%',\n\t\t\ty: '0%'\n\t\t}, {\n\t\t\tx: endX + '%',\n\t\t\ty: endY + '%',\n\t\t\tease: Easing.Power4.easeOut,\n\t\t\tonComplete: () => {\n\t\t\t\tthis.$el.hide();\n\t\t\t\tthis.trigger( 'transitionOutComplete' );\n\t\t\t},\n\t\t\toverwrite: true\n\t\t} );\n\n\t\t// animate content layer\n\t\tTweenLite.fromTo( this.$el.find( '> .content' ), PAGE_TRANSITION_DURATION, {\n\t\t\t// display: 'block',\n\t\t\tx: '0%',\n\t\t\ty: '0%'\n\t\t}, {\n\t\t\tx: ( endX * this.layerAnimationOffset ) + '%',\n\t\t\ty: ( endY * this.layerAnimationOffset ) + '%',\n\t\t\tease: Easing.Power4.easeOut,\n\t\t\toverwrite: true\n\t\t} );\n\n\t\treturn [ endX, endY ];\n\t}\n\n\ttransitionInComplete() {}\n\n\ttransitionOutComplete() {\n\n\t\tthis.$el.css( {\n\t\t\ttransform: ''\n\t\t} );\n\t\tthis.$el.find( '>.content' )\n\t\t\t.scrollTop( 0 );\n\n\t\tthis.$( '.cover' )\n\t\t\t.off( 'mousewheel' );\n\t}\n}\n\nmodule.exports = Page;\n","var _ = require( 'lodash' );\nvar AnimationPlayerPage = require( './Animation-Player-Page' );\n\nclass ThreejsPage extends AnimationPlayerPage {\n\tconstructor( options ) {\n\t\tsuper( _.mergeWith( {\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Class Properties\n\n\t\t\tname: 'Threejs',\n\t\t\tautoPlay: true,\n\t\t\tautoStop: true,\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// local Properties\n\n\t\t\tthreeView: null,\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Bind Functions\n\n\t\t\tbindFunctions: [\n\t\t\t\t'afterRender',\n\t\t\t\t'play',\n\t\t\t\t'stop',\n\t\t\t\t'update',\n\t\t\t\t'draw',\n\t\t\t\t'setupThreeView'\n\t\t\t],\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Event Listeners\n\n\t\t\tevents: [],\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Data Binding\n\n\t\t\tdataBindings: []\n\t\t}, options, ThreejsPage.mergeRules ) );\n\n\t\t// ---------------------------------------------------\n\t\t// Finish setup\n\t}\n\n\t// ---------------------------------------------------\n\n\tsetupThreeView() {\n\t\tif ( !this.threeView || !this.threeView.setup() ) {\n\t\t\tthrow new Error( 'threeView must be set by Page that subclasses Threejs-Page' );\n\t\t}\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\t// Event Handlers\n\n\tonResize() {\n\t\tif ( this.threeView ) this.threeView.onResize();\n\t}\n\n\t// ---------------------------------------------------\n\n\t// ---------------------------------------------------\n\t// PEAK/Page Overrides\n\n\t// transitionIn() {\n\t// \tsuper.transitionIn();\n\t// \t}\n\t//\n\t// transitionInComplete() {\n\t// \tsuper.transitionInComplete();\n\t// }\n\t//\n\t// // ---------------------------------------------------\n\t//\n\t// transitionOut() {\n\t// \tsuper.transitionOut();\n\t// }\n\t//\n\t// // ---------------------------------------------------\n\t//\n\t// beforeRender() {\n\t// \tsuper.beforeRender();\n\t// }\n\n\t// ---------------------------------------------------\n\n\tafterRender() {\n\t\tsuper.afterRender();\n\t\tthis.setupThreeView();\n\t};\n\n\t// ---------------------------------------------------\n\t// PEAK/AnimationPlayerPage Overrides\n\n\tplay() {\n\t\tsuper.play();\n\t\treturn this;\n\t};\n\n\t// ---------------------------------------------------\n\n\tstop() {\n\t\tsuper.stop();\n\t\treturn this;\n\t};\n\n\tupdate( data ) {\n\t\t// console.log( 'update' )\n\t\tthis.threeView.update( _.extend( {\n\t\t\tmouseTelemetrics: this.mouseTelemetrics\n\t\t}, data ) );\n\t\treturn this;\n\t}\n\n\tdraw() {\n\t\t// console.log( 'draw' )\n\t\tthis.threeView.draw();\n\t\treturn this;\n\t}\n}\n\nmodule.exports = ThreejsPage;\n","var _ = require( 'lodash' );\nvar $ = require( 'jquery' );\nvar Base = require( '../Base' );\nvar Collection = require( '../collections/Collection' );\n\nclass Model extends Base {\n\tconstructor( attributes, options ) {\n\t\tsuper( Base.merge( {\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Local Properties\n\t\t\turl: '',\n\t\t\tidField: 'id',\n\n\t\t\t// Whether or not to convert attributes that are collections to a list of model ids rather than saving the complete model\n\t\t\t'toJSONRefs': false,\n\n\t\t\t// List Attribute names you don't want to save when converting to json\n\t\t\t// useful when you have a property that you want to monitor changes on\n\t\t\t// but that doesn't need to be saved to the server\n\t\t\t'omitAttributes': [],\n\n\t\t\t// ---------------------------------------------------\n\t\t\t// Event Listeners\n\t\t\tevents: [],\n\t\t\tignoreEvents: [],\n\t\t\t// ---------------------------------------------------\n\t\t\t// Bind functions\n\n\t\t\tbindFunctions: [\n\t\t\t\t'addToCollection',\n\t\t\t\t'destroy',\n\t\t\t\t'fetch',\n\t\t\t\t'save',\n\t\t\t\t'forwardEvent',\n\t\t\t\t'makeAttribute',\n\t\t\t\t'removeFromCollection',\n\t\t\t\t'set'\n\t\t\t]\n\t\t}, options ) );\n\n\t\t// ---------------------------------------------------\n\t\t// Non-attribute Properties\n\n\t\tthis._collections = [];\n\n\t\t// ---------------------------------------------------\n\t\t// Record Attributes\n\t\tlet defaultAttributes = {};\n\t\tdefaultAttributes[ this.idField ] = _.uniqueId();\n\t\tthis._attributes = _.extend( defaultAttributes, attributes );\n\n\t\t// ---------------------------------------------------\n\t\t// Make Attribute getters & setters\n\n\t\t_.each( this._attributes, this.makeAttribute );\n\t\tthis.delegateEvents();\n\t}\n\n\t[ Symbol.iterator ]() {\n\t\treturn this._attributes.values();\n\t}\n\n\t// ---------------------------------------------------\n\n\tfetch() {\n\t\t// load stuff in here\n\t\t// resolve the deferred when load is complete\n\n\t\tif ( this.url ) {\n\t\t\t// get the data at the url\n\t\t\treturn $.get( this.url, {\n\t\t\t\t\tid: this[ this.idField ]\n\t\t\t\t} )\n\t\t\t\t.then( ( data ) => {\n\t\t\t\t\tdata = this.parse( data );\n\t\t\t\t\t_.each( data, this.makeAttribute );\n\t\t\t\t} );\n\t\t} else {\n\t\t\t// we're all set!\n\t\t\tvar deferred = $.Deferred();\n\t\t\tdeferred.resolve( this );\n\t\t\treturn deferred;\n\t\t}\n\t}\n\n\t// ---------------------------------------------------\n\n\tparse( data ) {\n\t\treturn data;\n\t}\n\n\t// ---------------------------------------------------\n\n\tsave( options = {} ) {\n\t\tif ( this.options.url ) {\n\t\t\t// set the data at the url\n\t\t\treturn $.ajax( _.defaults( options, {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: this.options.url,\n\t\t\t\tdata: JSON.stringify( this.toJSON() ),\n\t\t\t\tcrossDomain: true,\n\t\t\t\tcontentType: 'application/json',\n\t\t\t\tdataType: 'JSON'\n\t\t\t} ) );\n\t\t} else {\n\t\t\t// we're all set!\n\t\t\tvar deferred = $.Deferred();\n\t\t\tdeferred.resolve( this );\n\t\t\treturn deferred;\n\t\t}\n\t}\n\n\t// ---------------------------------------------------\n\n\ttoJSON( justId ) {\n\t\tif ( justId ) return this._attributes.id;\n\n\t\treturn _( this._attributes )\n\t\t\t.omit( this.options.omitAttributes )\n\t\t\t.cloneDeepWith( ( a ) => {\n\t\t\t\t// pass toJSONRefs to tell collections that may be children of this model whether to\n\t\t\t\t// save their children as objects or just IDs that can be picked up as references from a master collection when rebuilding\n\t\t\t\tif ( a.toJSON ) {\n\t\t\t\t\treturn a.toJSON( this.options.toJSONRefs );\n\t\t\t\t};\n\t\t\t\tif ( this.token ) a.token = this.token;\n\t\t\t\treturn a;\n\t\t\t} );\n\t}\n\n\t// ---------------------------------------------------\n\n\tstatic deRef( sourceCollection, idList ) {\n\t\treturn new Collection( sourceCollection.get( idList ) );\n\t}\n\n\t// ---------------------------------------------------\n\n\taddToCollection( collection, options ) {\n\t\tif ( this._collections.indexOf( collection ) === -1 ) {\n\t\t\tthis._collections.push( collection );\n\n\t\t\t// create listeners on collection for attribute changes\n\t\t\t_.each( this._attributes, ( val, key ) => {\n\t\t\t\tcollection.listenTo( this, `change:${key}`, collection.forwardEvent );\n\t\t\t} );\n\n\t\t\t// only trigger if model is not already a member\n\t\t\tif ( !options.silent ) {\n\t\t\t\tthis.trigger( 'addToCollection', {\n\t\t\t\t\tcollection: collection,\n\t\t\t\t\tmodel: this\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tremoveFromCollection( collection, options ) {\n\t\tif ( this._collections.indexOf( collection ) > -1 ) {\n\t\t\t_.remove( this._collections, collection );\n\t\t\t// only trigger if model is a member\n\t\t\tif ( !options.silent ) {\n\t\t\t\tthis.trigger( 'removeFromCollection', {\n\t\t\t\t\tcollection: collection,\n\t\t\t\t\tmodel: this\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tdestroy() {\n\t\tthis.undelegateEvents();\n\t\tthis.stopListening();\n\t\t_.each( this._collections, ( c ) => {\n\t\t\t// create forwarder on collection for attribute\n\t\t\tc.remove( this );\n\t\t} );\n\t\tthis._collections = [];\n\t\tthis._attributes = [];\n\t\tthis.trigger( 'destroy', this );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tmakeAttribute( value, name ) {\n\t\tlet desc = Object.getOwnPropertyDescriptor( this, name );\n\t\tif ( desc && desc.get !== undefined ) {\n\t\t\tthis[ name ] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t// // if it's already defined, just set the new value\n\t\t_.each( this._collections, ( c ) => {\n\t\t\t// create forwarder on collection for attribute\n\t\t\tc.listenTo( this, `change:${name}`, c.forwardEvent );\n\t\t} );\n\t\tObject.defineProperty( this, name, {\n\t\t\tset: ( val ) => {\n\t\t\t\tthis._attributes[ name ] = val;\n\t\t\t\tvar event = {\n\t\t\t\t\tmodel: this,\n\t\t\t\t\tname: name,\n\t\t\t\t\tvalue: val,\n\t\t\t\t\ttype: `change:${name} change`\n\t\t\t\t};\n\t\t\t\tthis.trigger( event.type, event, val );\n\n\t\t\t\t// if it is an emitter, listen for change events\n\t\t\t\tif ( val && _.isFunction( val.trigger ) ) {\n\t\t\t\t\tthis.listenTo( val, 'change', this.forwardEvent );\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: () => this._attributes[ name ]\n\t\t} );\n\t\tthis._attributes[ name ] = value;\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tforwardEvent( data ) {\n\t\tif ( data.forward === false ) return this;\n\t\tif ( this.ignoreEvents.indexOf( data.type ) > -1 ) return this;\n\t\tdata.parents = data.parents || [];\n\t\tdata.parents = data.parents || [];\n\t\tdata.parents.push( this );\n\t\tthis.trigger( data.type, data, data.value );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tset( data, name ) {\n\t\tif ( name ) {\n\t\t\tdata = {\n\t\t\t\t[ name ]: data\n\t\t\t};\n\t\t}\n\t\t_.each( data, this.makeAttribute );\n\t}\n\n\t// ---------------------------------------------------\n\n\tget attributes() {\n\t\treturn this._attributes;\n\t}\n}\n\nmodule.exports = Model;\n","var _ = require( 'lodash' );\nvar Model = require( './Model' );\nvar io = require( 'socket-io/client' );\n\nclass SocketModel extends Model {\n\tconstructor( attributes, options ) {\n\t\tsuper( Model.merge( {\n\t\t\t\t// default attributes\n\t\t\t}, attributes ),\n\t\t\tModel.merge( {\n\t\t\t\tevents: {\n\t\t\t\t\ttarget: 'io',\n\t\t\t\t\teventName: 'connect',\n\t\t\t\t\thandler: 'onConnect'\n\t\t\t\t},\n\t\t\t\tbindFunctions: [\n\t\t\t\t\t'onConnect'\n\t\t\t\t]\n\t\t\t}, options )\n\t\t);\n\n\t\t// ---------------------------------------------------\n\t\t// Local Properties\n\n\t\tthis.socket = io.socket( this.url );\n\t}\n\n\tonConnect() {\n\t\t_.each( this._attributes, ( val, name ) => {\n\t\t\tthis.socket.on( `change:${name}`, ( data ) => this[ name ] = data );\n\t\t} )\n\t}\n}\n\nmodule.exports = SocketModel;\n","var _ = require( 'lodash' );\nvar $ = require( 'jquery' );\nvar Base = require( '../Base' );\nvar Model = require( '../models/Model' );\n\nclass Collection extends Base {\n\tconstructor( models, options ) {\n\t\t// make models array optional\n\t\tif ( !_.isArray( models ) && typeof models === 'object' && typeof options === 'undefined' ) {\n\t\t\toptions = models;\n\t\t\tmodels = [];\n\t\t}\n\t\tsuper( _.mergeWith( {\n\t\t\tmodel: Model,\n\t\t\turl: null,\n\t\t\tidField: 'id',\n\t\t\tignoreEvents: [],\n\t\t\tbindFunctions: [\n\t\t\t\t'reset',\n\t\t\t\t'get',\n\t\t\t\t'set',\n\t\t\t\t'add',\n\t\t\t\t'remove',\n\t\t\t\t'empty',\n\t\t\t\t'parse',\n\t\t\t\t'fetch',\n\t\t\t\t'getRefs',\n\t\t\t\t'forwardEvent',\n\t\t\t\t'toJSON'\n\t\t\t]\n\t\t}, options, Base.mergeRules ) );\n\n\t\tthis.sort = this.getLocalObject( this.sort );\n\n\t\tthis._models = [];\n\t\tthis.reset( models, {\n\t\t\tsilent: true\n\t\t} );\n\t}\n\n\t// ---------------------------------------------------\n\n\t[ Symbol.iterator ]() {\n\t\treturn this._models.values();\n\t}\n\n\t// ---------------------------------------------------\n\n\treset( models, options ) {\n\t\toptions = options || {};\n\t\t// kill existing models\n\t\tthis.empty();\n\t\t// create new models\n\t\t_.each( models, ( m ) => this.add( m, options ) );\n\t\tif ( !options.silent ) {\n\t\t\tthis.trigger( 'reset', this );\n\t\t}\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tset( models, options ) {\n\t\toptions = options || {};\n\t\tif ( options.reset === true ) this.empty();\n\t\tmodels = _.isArray( models ) ? models : [ models ];\n\t\t_.each( models, ( attributes ) => {\n\t\t\tvar found = this.get( attributes.id );\n\t\t\tif ( found[ 0 ] ) {\n\t\t\t\t// if the model exists, update it's attributes\n\t\t\t\t_.extend( found[ 0 ], attributes );\n\t\t\t} else {\n\t\t\t\t// otherwise, add it\n\t\t\t\tthis.add( attributes );\n\t\t\t}\n\n\t\t} );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tadd( models, options ) {\n\t\toptions = options || {};\n\t\t// if models isn't an array, make it one\n\t\tmodels = _.isArray( models ) ? models : [ models ];\n\t\tvar updated = _.map( models, ( attributes ) => {\n\t\t\t// create new models\n\t\t\tif ( attributes[this.idField] ) {\n\t\t\t\tvar existingModels = this.get( attributes[this.idField] );\n\t\t\t\tif ( existingModels.length ) {\n\t\t\t\t\tif ( options.merge ) {\n\t\t\t\t\t\t// update other model\n\t\t\t\t\t\texistingModels[ 0 ].set( attributes );\n\t\t\t\t\t\t// we're done here\n\t\t\t\t\t\treturn existingModels;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// remove other model\n\t\t\t\t\t\tthis.remove( existingModels[ 0 ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// create a unique id\n\t\t\t\tattributes[this.idField] = _.uniqueId();\n\t\t\t}\n\t\t\t// create new model\n\t\t\tlet Model = this.model;\n\t\t\tvar m = new Model( attributes );\n\n\t\t\t// register in list only once\n\t\t\t// already check above to see if it exists\n\t\t\tthis._models.push( m );\n\t\t\t// tell the model it's a member here\n\t\t\tm.addToCollection( this, options );\n\t\t\t// listen to them\n\t\t\tthis.listenTo( m, 'change', this.forwardEvent );\n\t\t\tif ( !options.silent ) {\n\t\t\t\tthis.trigger( 'add', m );\n\t\t\t}\n\n\t\t\treturn m;\n\t\t} );\n\t\t// sort the models\n\t\tif ( this.sort ) {\n\t\t\tthis._models = this._models.sort( this.sort );\n\t\t\tupdated = updated.sort( this.sort );\n\t\t}\n\t\treturn updated;\n\t}\n\n\t// ---------------------------------------------------\n\n\tremove( models, options ) {\n\t\toptions = options || {};\n\t\t// if models isn't an array, make it one\n\t\t// create an internal copy of the models array to iterate on\n\t\tmodels = _.isArray( models ) ? models.slice() : [ models ];\n\t\t_.each( models, ( model ) => {\n\t\t\t// allow ids to be passed\n\t\t\tif ( typeof model !== 'object' ) {\n\t\t\t\tmodel = this.get( model );\n\t\t\t}\n\t\t\tvar index = this._models.indexOf( model );\n\n\t\t\tif ( index > -1 ) {\n\t\t\t\tthis.stopListening( model );\n\t\t\t\tthis._models.splice( index, 1 );\n\t\t\t\tmodel.removeFromCollection( this, options );\n\t\t\t\tif ( !options.silent ) {\n\t\t\t\t\tthis.trigger( 'remove', {\n\t\t\t\t\t\tcollection: this,\n\t\t\t\t\t\tmodel: model\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error( 'couldnt find model', model );\n\t\t\t}\n\t\t} );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\tempty( options ) {\n\t\tthis.remove( this._models, options );\n\t}\n\n\t// ---------------------------------------------------\n\n\tget( matchConditions ) {\n\t\t// make sure match conditions is an array\n\t\tmatchConditions = _.isArray( matchConditions ) ? matchConditions : [ matchConditions ];\n\n\t\t// an array of objects is assumed to be a list of match condition objects\n\t\t// an array of non-objects is assumed to be a list of ids\n\t\tif ( typeof matchConditions[ 0 ] !== 'object' ) {\n\t\t\t// convert to match condition objects\n\t\t\tmatchConditions = _.map( matchConditions, ( _id ) => {\n\t\t\t\tlet cond = {};\n\t\t\t\tcond[this.idField] = _id;\n\t\t\t\treturn cond;\n\t\t\t} );\n\t\t}\n\n\t\tvar models = _.chain( matchConditions )\n\t\t\t// for each condition, find a list of models that matches\n\t\t\t.map( ( condition ) => {\n\t\t\t\treturn _.filter( this._models, condition );\n\t\t\t} )\n\t\t\t.flatten()\n\t\t\t// only include models once in list\n\t\t\t.uniq()\n\t\t\t.value();\n\t\treturn models;\n\t}\n\n\t// ---------------------------------------------------\n\n\tat( index ) {\n\t\treturn this._models[ Math.abs( index % this.length ) ];\n\t}\n\n\t// ---------------------------------------------------\n\n\tfetch( options ) {\n\t\toptions = _.defaults( options, {\n\t\t\treset: true,\n\t\t\tmerge: false,\n\t\t\tparse: this.parse,\n\t\t\turl: this.url,\n\t\t\tquery: this.query\n\t\t} );\n\t\t// default fetch action is to replace from json api\n\n\t\tif ( options.url ) {\n\t\t\t// get the data at the url\n\t\t\treturn $.get( options.url, options.query )\n\t\t\t\t.then( options.reset ? ( data ) => this.reset( options.parse( data ), options )\n\t\t\t\t\t: ( data ) => _.each( options.parse( data ),\n\t\t\t\t\toptions.merge ? this.add\n\t\t\t\t\t: this.set\n\t\t\t\t) );\n\t\t} else {\n\t\t\t// we're all set!\n\t\t\tvar deferred = $.Deferred();\n\t\t\tdeferred.resolve( this );\n\t\t\treturn deferred;\n\t\t}\n\t}\n\n\t// ---------------------------------------------------\n\n\tparse( data ) {\n\t\treturn data;\n\t}\n\n\t// ---------------------------------------------------\n\n\tforwardEvent( data ) {\n\t\tif ( data.forward === false ) return this;\n\t\tif ( this.ignoreEvents.indexOf( data.type ) > -1) return this;\n\t\tdata.parents = data.parents || [];\n\t\tdata.parents.push( this );\n\t\tthis.trigger( data.type, data, data.value );\n\t\treturn this;\n\t}\n\n\t// ---------------------------------------------------\n\n\ttoJSON( refs ) {\n\t\treturn _.map( this._models, ( m ) => m.toJSON( refs ) );\n\t}\n\n\t// ---------------------------------------------------\n\n\tgetRefs() {\n\t\treturn _.map( this._models, ( m ) => m.id );\n\t}\n\n\t// ---------------------------------------------------\n\n\t// TODO: create wrapped convenience accessor functions from lodash\n\n\tmap( fn ) {\n\t\treturn _.map( this.models, fn );\n\t}\n\n\teach( fn ) {\n\t\t_.each( this.models, fn );\n\t\treturn this;\n\t}\n\n\twhere( fn ) {\n\t\treturn _.filter( this.models, fn );\n\t}\n\n\tfind( fn ) {\n\t\treturn _.find( this.models, fn );\n\t}\n\n\tfilter( fn ) {\n\t\treturn _.filter( this.models, fn );\n\t}\n\n\treduce( fn, init ) {\n\t\treturn _.reduce( this.models, fn, init );\n\t}\n\n\t// ---------------------------------------------------\n\n\tget length() {\n\t\treturn this._models.length;\n\t}\n\n\tget models() {\n\t\treturn this._models;\n\t}\n\n\t// ---------------------------------------------------\n\n\tset sortBy( attr ) {\n\t\tthis._options.sort = ( a, b ) => b[ attr ] - a[ attr ];\n\t\treturn attr;\n\t}\n\n}\n\nmodule.exports = Collection;\n","export const uiEventNames = [\n\t'mousemove',\n\t'mouseleave',\n\t'mouseenter',\n\t'mouseover',\n\t'mouseout',\n\t'mousedown',\n\t'mouseup',\n\t'keydown',\n\t'keyup',\n\t'touchstart',\n\t'touchend',\n\t'touchmove',\n\t'click',\n\t'focus',\n\t'blur'\n];\n\nexport const keycodes = {\n\t'Backspace': 8,\n\t'Tab': 9,\n\t'Enter': 13,\n\t'Shift': 16,\n\t'Ctrl': 17,\n\t'Alt': 18,\n\t'Break': 19,\n\t'CapsLock': 20,\n\t'Esc': 27,\n\t'Space': 32,\n\t'PageUp': 33,\n\t'PageDown': 34,\n\t'End': 35,\n\t'Home': 36,\n\t'Left': 37,\n\t'Up': 38,\n\t'Right': 39,\n\t'Down': 40,\n\t'Insert': 45,\n\t'Delete': 46,\n\t'0': 48,\n\t'1': 49,\n\t'2': 50,\n\t'3': 51,\n\t'4': 52,\n\t'5': 53,\n\t'6': 54,\n\t'7': 55,\n\t'8': 56,\n\t'9': 57,\n\t'A': 65,\n\t'B': 66,\n\t'C': 67,\n\t'D': 68,\n\t'E': 69,\n\t'F': 70,\n\t'G': 71,\n\t'H': 72,\n\t'I': 73,\n\t'J': 74,\n\t'K': 75,\n\t'L': 76,\n\t'M': 77,\n\t'N': 78,\n\t'O': 79,\n\t'P': 80,\n\t'Q': 81,\n\t'R': 82,\n\t'S': 83,\n\t'T': 84,\n\t'U': 85,\n\t'V': 86,\n\t'W': 87,\n\t'X': 88,\n\t'Y': 89,\n\t'Z': 90,\n\t'Windows': 91,\n\t'RightClick': 93,\n\t'Numpad0': 96,\n\t'Numpad1': 97,\n\t'Numpad2': 98,\n\t'Numpad3': 99,\n\t'Numpad4': 100,\n\t'Numpad5': 101,\n\t'Numpad6': 102,\n\t'Numpad7': 103,\n\t'Numpad8': 104,\n\t'Numpad9': 105,\n\t'Numpad*': 106,\n\t'Numpad+': 107,\n\t'Numpad-': 109,\n\t'Numpad.': 110,\n\t'Numpad/': 111,\n\t'F1': 112,\n\t'F2': 113,\n\t'F3': 114,\n\t'F4': 115,\n\t'F5': 116,\n\t'F6': 117,\n\t'F7': 118,\n\t'F8': 119,\n\t'F9': 120,\n\t'F10': 121,\n\t'F11': 122,\n\t'F12': 123,\n\t'NumLock': 144,\n\t'ScrollLock': 145,\n\t'MyComputer': 182,\n\t'MyCalculator': 183,\n\t';': 186,\n\t'=': 187,\n\t',': 188,\n\t'-': 189,\n\t'.': 190,\n\t'/': 191,\n\t'`': 192,\n\t'[': 219,\n\t'\\\\': 220,\n\t']': 221,\n\t'\"': 222\n};\n","function validate( data, type, minLength, maxLength ) {\n\t// TODO: allow type to be a string that acts as a global type\n\tif ( typeof type === 'string' ) {\n\t\treturn validate( data, type );\n\t}\n\tlet invalid = [];\n\tfor ( let key in data ) {\n\t\tinvalid.push( validateItem( data[ key ], type[ key ], key, minLength, maxLength ) );\n\t}\n\treturn invalid;\n}\n\nfunction validateItem( data, type, key, minLength, maxLength ) {\n\t// any piece of data that doesn't have an expectation is deemed not invalid\n\tif ( type === undefined ) return [];\n\tif ( minLength && data.length < minLength ) {\n\t\treturn [ {\n\t\t\tcode: 0,\n\t\t\tkey: key,\n\t\t\tmessage: `${key} needs to be at least ${minLength} characters.`\n\t\t} ];\n\t}\n\tif ( maxLength && data.length < minLength ) {\n\t\treturn [ {\n\t\t\tcode: 0,\n\t\t\tkey: key,\n\t\t\tmessage: `${key} cannot be longer than ${maxLength} characters.`\n\t\t} ];\n\t}\n\treturn validateType[ type ]( data, key );\n}\n\nvar validateType = {\n\ttrue: ( data, key ) => {\n\t\tkey = key || 'data';\n\t\tlet invalid = [];\n\t\tif ( !data ) {\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 0,\n\t\t\t\tkey: key,\n\t\t\t\tmessage: `${key} needs true`\n\t\t\t} );\n\t\t}\n\t\treturn invalid;\n\t},\n\tfalse: ( data, key ) => {\n\t\tkey = key || 'data';\n\t\tlet invalid = [];\n\t\tif ( data ) {\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 0,\n\t\t\t\tkey: key,\n\t\t\t\tmessage: `${key} needs to be false`\n\t\t\t} );\n\t\t}\n\t\treturn invalid;\n\t},\n\tarray: ( data, key ) => {\n\t\tkey = key || 'data';\n\t\tlet invalid = [];\n\t\tif ( !Array.isArray( data ) ) {\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 0,\n\t\t\t\tkey: key,\n\t\t\t\tmessage: `${key} needs to be an Array`\n\t\t\t} );\n\t\t}\n\t\treturn invalid;\n\t},\n\tstring: ( data, key ) => {\n\t\tkey = key || 'data';\n\t\tlet invalid = [];\n\t\t// TODO: run through naughty word filter\n\t\treturn invalid;\n\t},\n\temail: ( data, key ) => {\n\t\tkey = key || 'data';\n\t\tlet invalid = [];\n\t\t// run through email validator\n\t\tlet parts = data.split( '@' );\n\t\tif ( parts.length < 2 ) {\n\t\t\t// no @ sign\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 0,\n\t\t\t\tkey: key,\n\t\t\t\tdata: data,\n\t\t\t\tmessage: 'Invalid Email Address.'\n\t\t\t} );\n\t\t\treturn invalid;\n\t\t}\n\t\tparts = parts[ 1 ].split( '.' );\n\t\tif ( parts.length < 2 ) {\n\t\t\t// no dot\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 0,\n\t\t\t\tkey: key,\n\t\t\t\tdata: data,\n\t\t\t\tmessage: 'Invalid Email Address'\n\t\t\t} );\n\t\t}\n\t\treturn invalid;\n\t},\n\tzip: ( data, key ) => {\n\t\tkey = key || 'data';\n\t\tlet invalid = [];\n\t\tif ( !parseInt( data ) ) {\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 0,\n\t\t\t\tkey: key,\n\t\t\t\tdata: data,\n\t\t\t\tmessage: `${key} needs to be a number`\n\t\t\t} );\n\t\t}\n\t\tif ( parseInt( data ) < 10000 ) {\n\t\t\tinvalid.push( {\n\t\t\t\tcode: 1,\n\t\t\t\tkey: key,\n\t\t\t\tdata: data,\n\t\t\t\tmessage: `${key} needs at least 5 digits`\n\t\t\t} );\n\t\t}\n\t\treturn invalid;\n\t}\n};\n\nmodule.exports = {\n\tvalidate,\n\tvalidateItem\n};\n","function prefixMethod(methodName, options){\n\toptions = options || {};\n\tif (!options.uncapitalized){\n\t\tmethodName = methodName.charAt(0).toUpperCase() + methodName.slice(1);\n\t}\n\tvar parent = options.parent || window;\n\tvar prefixes = options.prefixes || [\"webkit\", \"moz\", \"o\", \"ms\"];\n\n\tvar i = 0;\n\twhile(!parent[methodName]){\n\t\tparent[methodName] = parent[prefixes[i++] + methodName];\n\t}\n\treturn parent[methodName];\n}\n\nmodule.exports = prefixMethod;","var constants = require(\"constants\")[environment];\n\nvar SocialService = {\n\n\t// this should only be used for main site share\n\tshareFacebook: function (options) {\n\t\t// console.log('shareFacebook', options);\n\t\toptions = _.extend({\n\t\t\turl: location.href,\n\n\t\t}, options);\n\t\tvar site = encodeURIComponent(options.url);\n\n\t\tvar shareURL = 'http://www.facebook.com/sharer.php?u=' + site ;\n\t\topenWindow(shareURL, 'Facebook');\n\t},\n\n\n\tshareGooglePlus: function (options) {\n\t\t// console.log('shareGooglePlus', options);\n\t\toptions = _.extend({\n\t\t\turl: location.href,\n\t\t}, options);\n\t\tvar site = encodeURIComponent(options.url);\n\n\t\tvar shareURL = 'https://plus.google.com/share?url=' + site ;\n\t\topenWindow(shareURL, 'GooglePlus');\n\t},\n\n\t// shareFacebookDynamic: function (options) {\n\t// \tvar title = 'title=' + encodeURIComponent(options.title);\n\t// \tvar message = 'description=' + encodeURIComponent(options.message);\n\t// \tvar img = 'img=' + encodeURIComponent(options.img);\n\t// \tvar redirURL = 'redirectURL=' + encodeURIComponent(options.redirectURL);\n\t// \tvar params = [redirURL, title, message, img];\n\n\t// \t// generic share url\n\t// \tvar shareUrl = constants.site_root + 'share?' + params.join('&');\n\n\t// \t//    console.log(params);\n\t// \tconsole.log(shareUrl);\n\t// \tSocialService.shareFacebook({\n\t// \t\turl: shareUrl\n\t// \t});\n\t// },\n\n\tshareTwitter: function (options) {\n\t\t// console.log('shareTwitter', options);\n\t\toptions = _.extend({\n\t\t\turl: '',\n\t\t\tmessage: undefined,\n\t\t}, options);\n\n\t\tif( options.url.length + options.message.length > 140){\n\t\t\tconsole.warn(\"tweet characters >140: \", options.url.length + options.message.length);\n\t\t}\n\n\t\tvar message = encodeURIComponent(options.message);\n\t\tvar shareURL;\n\t\tif (options.url.length > 1){\n\t\t\tvar site = encodeURIComponent(options.url);\n\t\t\tshareURL = 'http://twitter.com/share?text=' + message + '&url=' + site;\n\t\t}else{\n\t\t\tshareURL = 'http://twitter.com/share?text=' + message;\n\t\t}\n\t\topenWindow(shareURL, 'Twitter');\n\t},\n\n\tshareTumblr: function (options) {\n\t\t// console.log('shareTumblr', options);\n\t\toptions = _.extend({\n\t\t\timg: \"\",\n\t\t\turl: window.location.href,\n\t\t\ttitle: undefined,\n\t\t\tmessage: \"\",\n\t\t}, options);\n\n\t\t//var site = '&u=' + encodeURIComponent(options.url);\n\t\t//var title = options.title ? '&t=' + encodeURIComponent(options.title) : '';\n\t\t//var shareURL = 'http://tumblr.com/share?s=&v=3' + title + site;\n\t\t// var site =  encodeURIComponent(options.url);\n\t\tvar site =  encodeURIComponent(options.url);\n\t\tvar photo = encodeURIComponent(options.img);\n\t\tvar title =  encodeURIComponent(options.title);\n\t\tvar message =  encodeURIComponent(options.message);\n\t\tvar shareURL_p = \"//www.tumblr.com/share/photo?source=\" + photo + \"&caption=\" + message + \"&click_thru=\" + site;\n\t\t// var shareURL= 'http://www.tumblr.com/share/link?url=' + site + '&name=' + title + '&description='+ desc;\n\t   \n\t\topenWindow(shareURL_p, 'Tumblr');\n\t},\n\n\tsharePinterest: function (options) {\n\t\tconsole.log('sharePinterest', options);\n\t\toptions = _.extend({\n\t\t\turl: window.location.href,\n\t\t\tmessage: undefined,\n\t\t\tmedia: undefined,\n\t\t\tisVideo: false\n\t\t}, options);\n\n//            img = 'http://media.giphy.com/media/iP8hhgIczK56U/giphy.gif';\n\t\tvar media = options.media ? '&media=' + encodeURIComponent(options.media) : '';\n\t\tvar isVideo = options.isVideo ? '&isVideo=true' : '';\n\t\tvar site = encodeURIComponent(options.url);\n\t\tvar message = options.message ? '&description=' + encodeURIComponent(options.message) : '';\n\t\tvar shareURL = 'http://pinterest.com/pin/create/button/?url=' + site + message + media + isVideo;\n\t\topenWindow(shareURL, 'Pinterest');\n\t},\n\n};\n\nfunction openWindow(url, title) {\n\t// console.log('openWindow', url, title);\n\tvar width = 575,\n\t\theight = 425,\n\t\topts =\n\t\t\t',width=' + width +\n\t\t\t',height=' + height;\n\twindow.open(url, title, opts);\n}\n\nmodule.exports = SocialService;","var _ = require( 'underscore' );\nvar $ = require( 'jquery' );\nvar log = require( '../utils/log' );\n\nvar GA_ACCOUNTS = [\n\t\"UA-xxxxxxxx-1\"\n];\nvar GTM_ACCOUNT = \"GTM-xxxxxx\";\nvar OMNNITURE_IDS = {\n\tpageid: '',\n\tpagesite: ''\n};\n\nvar GoogleAnalytics = function( document, window ) {\n\tvar _this = this;\n\tthis.accountLabels = [];\n\tthis.accountIds = [];\n\tthis.accounts = {};\n\tthis.setAccounts = function( accounts ) {\n\t\t_this.accountIds = accounts;\n\t\t_.each( accounts, function( accountId, i ) {\n\t\t\t// make a unique alphabetical label for each account\n\t\t\tvar label = String.fromCharCode( 97 + i );\n\t\t\t_this.accounts[ label ] = accountId;\n\t\t\t_setAccount = [ label + \"._setAccount\", accountId ];\n\t\t\twindow._gaq.push( _setAccount );\n\t\t} );\n\t\treturn this;\n\t};\n\tthis.trackPageview = function( args ) {\n\t\t_.each( _this.accounts, function( accountId, label ) {\n\t\t\tvar _trackPageview = [ label + \"._trackPageview\" ];\n\t\t\tif ( args[ 0 ] ) _trackPageview.push( args[ 0 ] );\n\t\t\twindow._gaq.push( _trackPageview );\n\t\t} );\n\t\treturn this;\n\t};\n\tthis.trackEvent = function( args ) {\n\t\t_.each( _this.accounts, function( accountId, label ) {\n\t\t\tvar _trackEvent = [ label + \"._trackEvent\" ];\n\t\t\twindow._gaq.push( ( _trackEvent.concat( args ) ) );\n\t\t} );\n\t\treturn this;\n\t};\n\t// Add the GA tag to stage\n\t( function() {\n\t\twindow._gaq = [];\n\t\twindow._gaq.push( [ '_setDomainName', 'none' ] );\n\t\tvar ga = document.createElement( 'script' );\n\t\tga.type = 'text/javascript';\n\t\tga.async = true;\n\t\tga.src = ( 'https:' == document.location.protocol ? 'https://ssl' : 'http://www' ) + '.google-analytics.com/ga.js';\n\t\tvar s = document.getElementsByTagName( 'script' )[ 0 ];\n\t\ts.parentNode.insertBefore( ga, s );\n\t\tga.onload = function() {\n\t\t\tvar gaqpush = _gaq.push;\n\t\t\twindow._gaq.push = function( args ) {\n\t\t\t\tlog( \"\\n***************************************************\" );\n\t\t\t\tlog( \"google analytics: \", args.join( \" | \" ) );\n\t\t\t\tlog( \"***************************************************\\n\" );\n\t\t\t\t// RL.warn(\"google analytics: \", args.join( \" | \" ));\n\t\t\t\tgaqpush( args );\n\t\t\t};\n\t\t};\n\t} )();\n\n\t// STOCK ANALYTICS.JS IMPLEMENTATION\n\t( function( i, s, o, g, r, a, m ) {\n\t\ti[ 'GoogleAnalyticsObject' ] = r;\n\n\t\ti[ r ] = i[ r ] || function() {\n\t\t\t\t(\n\t\t\t\t\ti[ r ].q = i[ r ].q || [] )\n\t\t\t\t.push( arguments );\n\t\t\t},\n\t\t\ti[ r ].l = 1 * new Date();\n\t\ta = s.createElement( o ),\n\t\t\tm = s.getElementsByTagName( o )[ 0 ];\n\t\ta.async = 1;\n\t\ta.src = g;\n\t\tm.parentNode.insertBefore( a, m );\n\t} )( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' );\n\n\tga( 'create', 'UA-XXXX-Y', 'auto' ); // Replace with your property ID.\n\tga( 'send', 'pageview' );\n\n\treturn this;\n};\n\nvar GoogleTagManager = function( document, window ) {\n\tthis.id = null;\n\tvar _this = this;\n\tthis.init = function( id ) {\n\t\tthis.id = id || \"a\";\n\t\t( function( w, d, s, l, i ) {\n\t\t\tw[ l ] = w[ l ] || [];\n\t\t\tw[ l ].push( {\n\t\t\t\t'gtm.start': new Date()\n\t\t\t\t\t.getTime(),\n\t\t\t\tevent: 'gtm.js'\n\t\t\t} );\n\t\t\tvar f = d.getElementsByTagName( s )[ 0 ],\n\t\t\t\tj = d.createElement( s ),\n\t\t\t\tdl = l != 'dataLayer' ? '&l=' + l : '';\n\t\t\tj.async = true;\n\t\t\tj.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;\n\t\t\tf.parentNode.insertBefore( j, f );\n\t\t} )( window, document, 'script', 'dataLayer', id );\n\t\treturn this;\n\t};\n\tthis.trackPageview = function( data ) {\n\n\t\treturn this;\n\t};\n\tthis.trackEvent = function( data ) {\n\t\twindow.dataLayer.push( data );\n\t\treturn this;\n\t};\n\treturn this;\n};\n\nvar Omniture = function( $ ) {\n\tthis.trackPageview = function() {};\n\tthis.trackEvent = function() {};\n\t// Add the Omniture tag to stage\n\t$( 'body' )\n\t\t.append( $( `<script src=\"/js/crm/engine.js\" id=\"crmEngine\" vlp=\"false\" pageid=\"${OMNNITURE_IDS.pageid}\" pagelocale=\"en\" pagesite=\"${OMNNITURE_IDS.pagesite}\"/>` ) );\n\treturn this;\n};\n\nvar trackers = {};\nvar initialized = false;\n\nclass Analytics {\n\tstatic init( options ) {\n\t\tif ( initialized ) {\n\t\t\tlog( 'Analytics already initialized' );\n\t\t\treturn this;\n\t\t}\n\t\tGA_ACCOUNTS = options.GA_ACCOUNTS || GA_ACCOUNTS;\n\t\tGTM_ACCOUNT = options.GTM_ACCOUNT || GTM_ACCOUNT;\n\t\tOMNNITURE_IDS = options.OMNNITURE_IDS || OMNNITURE_IDS;\n\t\t// console.log(\"Tracking.\"+\"init()\", arguments);\n\t\t// trackers.ga = new GoogleAnalytics(document, window);\n\t\ttrackers.gtm = new GoogleTagManager( document, window );\n\t\t// trackers.o = new Omniture($)\n\t\t// window.env == \"dev\" ? id += \"2\" : id += \"1\";\n\t\t// trackers.ga.setAccounts(GA_ACCOUNTS);\n\t\ttrackers.gtm.init( GTM_ACCOUNT );\n\t\tAnalytics.trackPageview();\n\t\tinitialized = true;\n\t}\n\tstatic trackPageview( data ) {\n\t\t_.each( this.trackers, function( tracker ) {\n\t\t\ttracker.trackPageview( data );\n\t\t} );\n\t\tAnalytics.report( data );\n\t\treturn this;\n\t}\n\tstatic trackEvent( data ) {\n\t\t_.each( this.trackers, function( tracker ) {\n\t\t\ttry {\n\t\t\t\ttracker.trackEvent( data );\n\t\t\t} catch ( e ) {}\n\t\t} );\n\t\tAnalytics.report( data );\n\t\treturn this;\n\t}\n\tstatic report( data ) {\n\t\tlog( '-- Tracking Report', data );\n\t\treturn this;\n\t}\n};\nmodule.exports = Analytics;\n","/**\n * The *AudioSource object creates an analyzer node, sets up a repeating function with setInterval\n * which samples the input and turns it into an FFT array. The object has two properties:\n * streamData - this is the Uint8Array containing the FFT data\n * volume - cumulative value of all the bins of the streaData.\n *\n * The MicrophoneAudioSource uses the getUserMedia interface to get real-time data from the user's microphone. Not used currently but included for possible future use.\n */\n\nclass DataSource {\n\tconstructor( options ) {\n\t\tthis.dataSize = options.dataSize || 2048;\n\t\tthis.startTime = Date.now();\n\t}\n\tupdate() {}\n\tonUpdate() {\n\t\tthis.update();\n\t}\n\tstopSampling() {}\n\tdestroy() {}\n\tget currentTime() {\n\t\treturn Date.now() - this.startTime;\n\t}\n}\n\nmodule.exports = DataSource;\n","/**\n * The *AudioSource object creates an analyzer node, sets up a repeating function with setInterval\n * which samples the input and turns it into an FFT array. The object has two properties:\n * streamData - this is the Uint8Array containing the FFT data\n * volume - cumulative value of all the bins of the streaData.\n *\n * The MicrophoneAudioSource uses the getUserMedia interface to get real-time data from the user's microphone. Not used currently but included for possible future use.\n */\n\nvar DataSource = require( '../Data-Source' );\nvar prefixMethod = require( 'peak/js/lib/prefixmethod' );\n\nprefixMethod( 'getUserMedia', {\n\tparent: navigator\n} );\nprefixMethod( 'AudioContext' );\n\nclass MicrophoneDataSource extends DataSource {\n\tconstructor( options ) {\n\t\tsuper( options );\n\t\tthis.startTime = Date.now();\n\t\tthis.fftsize = 2048;\n\t\tthis.volume = 0;\n\t\tthis.analyser;\n\n\t\tnavigator.getUserMedia( {\n\t\t\taudio: true\n\t\t}, ( stream ) => {\n\t\t\tthis.audioCtx = new window.AudioContext();\n\t\t\tthis.mic = this.audioCtx.createMediaStreamSource( stream );\n\t\t\tthis.analyser = this.audioCtx.createAnalyser();\n\t\t\tthis.analyser.fftSize = this.fftsize;\n\t\t\tthis.mic.connect( this.analyser );\n\t\t\tthis.streamData = new Uint8Array( this.analyser.frequencyBinCount );\n\t\t\tthis.intervalId = setInterval( this.sampleAudioStream, 1000 / 60 );\n\t\t}, function() {\n\t\t\talert( 'error getting microphone input.' );\n\t\t} );\n\t}\n\n\tsampleAudioStream() {\n\t\tthis.analyser.getByteFrequencyData( this.streamData );\n\t};\n\n\tget currentTime() {\n\t\treturn ( Date.now() - this.startTime ) / 1000;\n\t};\n\n\tdestroy() {\n\t\tthis.stopSampling();\n\t\tthis.mic.disconnect();\n\t\tthis.analyser.disconnect();\n\t};\n\n}\n\nmodule.exports = MicrophoneDataSource;\n","/**\n * The *AudioSource object creates an analyzer node, sets up a repeating function with setInterval\n * which samples the input and turns it into an FFT array. The object has two properties:\n * streamData - this is the Uint8Array containing the FFT data\n * volume - cumulative value of all the bins of the streaData.\n *\n * The MicrophoneAudioSource uses the getUserMedia interface to get real-time data from the user's microphone. Not used currently but included for possible future use.\n */\n\nvar DataSource = require( '../Data-Source' );\nvar prefixMethod = require( 'peak/js/lib/prefixmethod' );\n\nprefixMethod( 'getUserMedia', {\n\tparent: navigator\n} );\nprefixMethod( 'AudioContext' );\n\nclass AudioPlayerDataSource extends DataSource {\n\tconstructor( player, options ) {\n\t\tsuper();\n\t\tthis.player = player;\n\t\tthis.fftsize = 2048;\n\t\tthis.audioCtx = new window.AudioContext();\n\t\tthis.analyser = this.audioCtx.createAnalyser();\n\t\tthis.analyser.fftSize = this.fftsize;\n\t\tthis.source = this.audioCtx.createMediaElementSource( this.player );\n\t\tthis.source.connect( this.analyser );\n\t\tthis.analyser.connect( this.audioCtx.destination );\n\t\tthis.analyser.smoothingTimeConstant = 0.1;\n\n\t\tthis.intervalId = setInterval( this.sampleAudioStream, 1000 / 60 );\n\t\tthis.streamData = new Uint8Array( this.analyser.frequencyBinCount );\n\t}\n\n\tsampleAudioStream() {\n\t\tthis.analyser.getByteFrequencyData( this.streamData );\n\t}\n\n\tplayStream( streamUrl ) {\n\t\t// console.log( streamUrl );\n\t\t// get the input stream from the audio element\n\t\tthis.player.addEventListener( 'ended', function() {\n\t\t\tthis.directStream( 'coasting' );\n\t\t} );\n\t\tthis.player.setAttribute( 'src', this.streamUrl );\n\t\tthis.player.play();\n\t}\n\tstopSampling() {\n\t\tclearInterval( this.intervalId );\n\t};\n\n\tdestroy() {\n\t\tthis.stopSampling();\n\t\tthis.source.disconnect();\n\t\tthis.analyser.disconnect();\n\t};\n\n\tget currentTime() {\n\t\treturn this.player.currentTime;\n\t};\n}\n\nmodule.exports = AudioPlayerDataSource;\n","import * as Base from './Base';\nimport * as View from './views/View';\nimport * as ThreeView from './views/three-view/Three-View';\nimport * as Page from './views/pages/Page';\nimport * as ThreejsPage from './views/pages/Threejs-Page';\nimport * as Model from './models/Model';\nimport * as SocketModel from './models/SocketModel';\nimport * as Collection from './collections/Collection';\nimport * as Constants from './data/Constants';\nimport * as Validator from './utils/Validator';\nimport * as prefixmethod from './lib/prefixmethod';\nimport * as Social from './services/Social';\nimport * as Analytics from './services/Analytics';\nimport * as DataSource from './services/Data-Source';\nimport * as MicrophoneDataSource from './services/Data-Sources/Microphone-Data-Source';\nimport * as AudioPlayerDataSource from './services/Data-Sources/Audio-Player-Data-Source';\n\nmodule.exports = {\n\tBase,\n\tView,\n\tThreeView,\n\tPage,\n\tThreePage,\n\tModel,\n\tSocketModel,\n\tCollection,\n\tConstants,\n\tValidator,\n\tprefixmethod,\n\tSocial,\n\tAnalytics,\n\tDataSource,\n\tMicrophoneDataSource,\n\tAudioPlayerDataSource,\n}\n"],"names":["_","require","$","Events","Base","options","merge","extend","makeBoundFunctions","bindFunctions","funcNames","context","each","funcName","error","bind","events","e","handler","getLocalObject","target","on","eventName","listenTo","off","stopListening","name","length","warn","opts","push","mergeRules","m","mergeWith","apply","objValue","srcValue","isArray","concat","prototype","templates","mixin","View","undefined","parseName","dates","el","find","views","hasRendered","keep","parentView","first","tagname","classname","id","$el","template","$prev","$next","parent","prev","next","remove","insert","templateFn","getTemplate","html","serialize","after","before","append","window","undelegateEvents","unbindData","setupElement","beforeRender","trigger","v","render","delegateEvents","bindData","afterRender","onResize","hash","attributeName","element","model","elementChangeEventName","mode","setElementData","getElementData","$element","isRadio","attr","updateMethod","is","updateElement","call","value","updateModel","event","val","fn","domUpdates","domUpdateRequest","requestAnimationFrame","updateDOM","$activeEl","filter","dataBindings","createDataBinding","forEach","selector","destroy","attributes","ENV","TEMPLATES","module","exports","THREE","ThreeView","renderer","WebGLRenderer","setClearColor","setSize","innerWidth","innerHeight","domElement","scenes","mapValues","SceneClass","sceneNames","keys","changeScene","activeScene","loadPromise","setup","then","width","height","halfWidth","halfHeight","s","data","time","Date","now","isLoaded","update","TweenLite","CSSPlugin","Easing","PAGE_TRANSITION_DURATION","Page","deferred","Deferred","resolve","promise","params","recallFetch","fetch","fetchModel","log","done","renderView","loadAssets","type","route","finishRender","state","defer","url","prevRoute","currentPage","page","newPage","parts","removeClass","addClass","transitionOut","subRoute","cloneDeep","slice","transitionIn","onRoute","preventDefault","scrollTop","show","to","fromTo","Power4","easeOut","startX","startY","col","row","css","layerAnimationOffset","endX","endY","hide","AnimationPlayerPage","ThreejsPage","threeView","Error","setupThreeView","mouseTelemetrics","draw","Collection","Model","_collections","defaultAttributes","idField","uniqueId","_attributes","makeAttribute","Symbol","iterator","values","get","parse","ajax","defaults","JSON","stringify","toJSON","justId","omit","omitAttributes","cloneDeepWith","a","toJSONRefs","token","collection","indexOf","key","forwardEvent","silent","c","desc","Object","getOwnPropertyDescriptor","defineProperty","isFunction","forward","ignoreEvents","parents","sourceCollection","idList","io","SocketModel","socket","models","sort","_models","reset","empty","add","found","updated","map","existingModels","set","addToCollection","index","splice","removeFromCollection","matchConditions","babelHelpers.typeof","_id","cond","chain","condition","flatten","uniq","Math","abs","query","refs","init","reduce","_options","b","uiEventNames","keycodes","validate","minLength","maxLength","invalid","validateItem","validateType","Array","split","parseInt","prefixMethod","methodName","uncapitalized","charAt","toUpperCase","prefixes","i","constants","environment","SocialService","location","href","site","encodeURIComponent","shareURL","message","photo","img","title","shareURL_p","media","isVideo","openWindow","open","GA_ACCOUNTS","GTM_ACCOUNT","OMNNITURE_IDS","GoogleTagManager","document","_this","w","d","l","getTime","f","getElementsByTagName","j","createElement","dl","async","src","parentNode","insertBefore","trackPageview","trackEvent","dataLayer","trackers","initialized","Analytics","gtm","tracker","report","DataSource","dataSize","startTime","navigator","MicrophoneDataSource","fftsize","volume","analyser","getUserMedia","stream","audioCtx","AudioContext","mic","createMediaStreamSource","createAnalyser","fftSize","connect","streamData","Uint8Array","frequencyBinCount","intervalId","setInterval","sampleAudioStream","getByteFrequencyData","stopSampling","disconnect","AudioPlayerDataSource","player","source","createMediaElementSource","destination","smoothingTimeConstant","streamUrl","addEventListener","directStream","setAttribute","play","currentTime"],"mappings":"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"}